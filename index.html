<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watchlist</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Movie <i class="fas fa-heart heart"></i> Watchlist</h1>
            <p class="subtitle">Track 
                <a href="https://letterboxd.com/" target="_blank">Movies</a> 
                and Rate them!
            </p>
            <div id="sync-status" class="status-message"></div>
        </header>
        
        <div class="app-container">
            <section class="list-section">
                <h2><i class="fas fa-film"></i> Your Watchlist</h2>

                <div class="fab" id="add-movie-btn">
                    <i class="fas fa-plus"></i>
                </div>
                <div class="fab2" id="import-config-btn" style="bottom: 100px; right: 20px;">
                    <i class="fas fa-file-import"></i>
                </div>

                <div class="loader" id="loader"></div>
                
                <div class="table-container">
                    <div class="filter-bar">
                        <input type="text" id="search-input" placeholder="Search title, director, genre, etc." />
                    </div>
                    <table id="watchlist-table">
                        <thead>
                            <tr>
                                <th data-sort="name">Title <i class="fas fa-sort"></i></th>
                                <th data-sort="year">Year <i class="fas fa-sort"></i></th>
                                <th data-sort="director">Director <i class="fas fa-sort"></i></th>
                                <th data-sort="type">Type <i class="fas fa-sort"></i></th>
                                <th data-sort="genre">Genre <i class="fas fa-sort"></i></th>
                                <th data-sort="dateAdded">Date Added <i class="fas fa-sort"></i></th>
                                <th data-sort="dateWatched">Date Watched <i class="fas fa-sort"></i></th>
                                <th data-sort="gfRating">X Rating <i class="fas fa-sort"></i></th>
                                <th data-sort="myRating">Y Rating <i class="fas fa-sort"></i></th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="watchlist-body">
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                    
                    <div id="empty-state" class="empty-state">
                        <i class="fas fa-film"></i>
                        <h3>Your watchlist is empty</h3>
                        <p>Add movies.</p>
                    </div>
                </div>
                
                <div class="stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-movies">0</div>
                        <div class="stat-label">Total Movies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-shows">0</div>
                        <div class="stat-label">Total Shows</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="watched-movies">0</div>
                        <div class="stat-label">Watched Movies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="watched-shows">0</div>
                        <div class="stat-label">Watched Shows</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-duration">0</div>
                        <div class="stat-label">Time Spent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avg-x-rating">0.0</div>
                        <div class="stat-label">Avg X Rating</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="avg-y-rating">0.0</div>
                        <div class="stat-label">Avg Y Rating</div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div class="modal" id="rating-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Rate Movie</h3>
                <button class="close-modal">&times;</button>
            </div>
            
            <div class="modal-rating">
                <h4 id="modal-movie-title"></h4>
                
                <div class="form-group">
                    <label>Date Watched</label>
                    <input type="date" id="date-watched" value="">
                </div>
                
                <div class="form-group">
                    <label>Y Rating</label>
                    <div class="rating" id="modal-y-rating"></div>
                </div>
                
                <div class="form-group">
                    <label>X Rating</label>
                    <div class="rating" id="modal-x-rating"></div>
                </div>
                
                <button id="save-rating-btn"><i class="fas fa-save"></i> Save Rating</button>
            </div>
        </div>
    </div>

    <div class="add-movie-modal" id="add-movie-modal">
        <div class="add-movie-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Thing</h3>
                <button class="close-add-modal">&times;</button>
            </div>
            
            <div class="modal-rating">
                <div class="form-group" id="type-field">
                    <label for="new-media-type">Type</label>
                    <select id="new-media-type">
                        <option value="Movie">Movie</option>
                        <option value="Show">Show</option>
                        <option value="Season">Season</option>
                        <option value="Episode">Episode</option>
                    </select>
                </div>

                <div class="form-group" id="title-field">
                    <label for="new-name">Title</label><br>
                    <input type="text" id="new-name" placeholder="Enter title">
                </div>

                <div class="form-group" id="show-field">
                    <label for="show-connection">Show ID</label>
                    <input type="text" id="show-connection" placeholder="Enter show ID">
                </div>

                <div class="form-group" id="season-num-field">
                    <label for="season-num">Season #</label>
                    <input type="number" step="1" id="season-num" min="0" max="999" value="1">
                </div>

                <div class="form-group" id="episode-num-field">
                    <label for="episode-num">Episode #</label>
                    <input type="number" step="1" id="episode-num" min="0" max="999" value="1">
                </div>

                <div class="form-group" id="year-field">
                    <label for="new-year">Year</label>
                    <input type="text" id="new-year" placeholder="Enter year or range">
                </div>
                
                <div class="form-group" id="director-field">
                    <label for="new-director">Director</label><br>
                    <input type="text" id="new-director" placeholder="Enter director">
                </div>

                <div class="form-group" id="genre-field">
                    <label for="new-genre">Genre (comma separated)</label><br>
                    <input type="text" id="new-genre" placeholder="Action, Drama, Comedy">
                </div>

                <div class="form-group" id="duration-field">
                    <label>Duration (hours):</label>
                    <input type="number" step="0.01" id="new-duration" min="0" max="999" value="2">
                </div>

                <div class="form-group" id="tSeasons-field">
                    <label>Total Seasons:</label>
                    <input type="number" step="1" id="new-season-amnt" min="0" max="999" value="1">
                </div>

                <div class="form-group" id="tEpisodes-field">
                    <label>Total Episodes:</label>
                    <input type="number" step="1" id="new-episode-amnt" min="0" max="999" value="1">
                </div>
                
                <div class="form-group" id="date-field">
                    <label for="new-date-added">Date Added</label>
                    <input type="date" id="new-date-added" value="">
                </div>
                
                <button id="save-new-movie-btn"><i class="fas fa-plus"></i> Add Movie</button>
            </div>
        </div>
    </div>

    <input type="file" id="config-file-input" accept=".json" style="display: none;">

    <script src="script.js"></script>
</body>
</html>